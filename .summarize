#!/bin/bash

# Summarize time for a given project or activity

# Set project too work with
PROJECT=$1

# Instruct user what to do 
# print existing activities in chosen project
# and wait for user input
choice=$(echo -e "Choose one activity \nall\nor\nquit\n$(ls $PROJECTS/$PROJECT)" | dmenu -i)

case $choice in 
    "quit")
        exit
        ;;
    "all")
        $WD/.addProject $PROJECTS/$PROJECT
        exit
        ;;
    *)
        # Check if given activity exist and if not
        # ask again
        for activity in $(ls $PROJECTS/$PROJECT); do
            if [[ $choice == $activity ]]; then
                # If activity exist then sum all
                # entries
                $WD/.addEntries $PROJECTS/$PROJECT/$choice
                exit
            fi
        done
        echo "Activity \"$choice\" does not exist, try again or exit (q)." | dmenu
        $WD/.summarize $PROJECT
        ;;
esac
