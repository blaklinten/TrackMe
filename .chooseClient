#!/bin/bash

# Choose what client the script should 
# handle.

# Set script to run when done
export SCRIPT=$1

# Inform user to choose one of the existing client
# and wait for user input
choice=$($WD/.parseSpaces $(echo -e "Choose an existing client, create a\nnew\nor\nquit\n$(for client in $(ls $CLIENTS); do $WD/.parseUnderscores $client; done)" | dmenu -i))

case $choice in
    "quit")
        echo "You have to create a client, exiting..." | dmenu
        pkill trackMe
        exit
        ;;
    "new")
        $WD/.createClient 
        ;;
    *)
        # Check if given client exist and if not
        # ask for it to be created.
        pushd $CLIENTS > /dev/zero
        for client in *; do
            if [[ $client == $choice ]]; then
                # If client exist, start script in this
                # client
                echo $client
                popd > /dev/zero
                exit
            fi
        done
            echo "Client \"$choice\" does not exist, try again or create it (n)." | dmenu
            $WD/.chooseClient $SCRIPT
        ;;
esac

