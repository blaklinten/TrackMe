#!/bin/bash

# These are the configuration options
# for the TrackMe script
#
# Use git sync yes/no
export GITSYNC=yes
#
# This is where the script lives
export PWD=/home/blaklinten/Git/TrackMe
###### TODO ######
# Fix info if    #
# git is not     #
# available      #
##################

# Export enviroment variables
export WD=$PWD
export TRACKME=$HOME/TrackMe
export ACTIVE=$TRACKME/active

# For clarity
export CLIENTS=$TRACKME
# Check if a timer is running and
# set client accordingly
if [[ ! -f $ACTIVE ]]; then
    # No active timer so ask user for client
    export CLIENT=$($WD/.chooseClient)
else
    # Otherwise, fetch client of running timer
    export CLIENT=$(head -n 1 $ACTIVE)
    echo "Client $($WD/.parseUnderscores $CLIENT) is running a timer." | dmenu
fi
export PROJECTS=$TRACKME/$CLIENT
#
# Check if project destination is ok
# if not, fix it
if [[ ! -d $TRACKME ]]; then
    mkdir -p $TRACKME
    echo "Creating working env..."
fi
