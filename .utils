#!/bin/bash

showAndRead()
{
	INFO="$1"
	CHOICES="$2"
	echo "$CHOICES" | dmenu -i -p "$INFO"
}

diff()
{
	let "DIFF = $2 - $1"
	let "SECONDS = DIFF % 60"
	let "MINUTES = (DIFF % 3600) / 60"
	let "HOURS = DIFF / 3600"

	echo "$HOURS:$MINUTES:$SECONDS"
}

showStatus()
{
if [[ ! -f "$ACTIVE" ]]; then
    showAndRead "No active timer running!"
    exit
fi

ACTIVITY=$(tail -n 3 "$ACTIVE" | head -n 1 )
PROJECT=$(tail -n 3 "$ACTIVE" | head -n 2 | tail -n 1)
START=$(tail -n 1 "$ACTIVE")
END=$(date +%s)

showAndRead "Timer running for $ACTIVITY on $PROJECT Started at $(date --date="@$START"). Running for $(diff "$START" "$END")."
}
