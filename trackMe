#!/bin/bash

#########################################################
# This is a script that helps me keep track of my time. #
#########################################################

# Check if env is ok,
# if not, fix it!
source configure

# Real time loop.
while true; do
    # Show different chioces 
    CHOICE=$(cat $WD/.choices | dmenu -i)
    case $CHOICE in
        "start")
            # Check if there is running timer and if so
            # inform and exist.
            if [[ -f $ACTIVE ]]; then
                echo "A timer is already running..." | dmenu 
            else
                # Choose project to start
                $WD/.chooseProject $WD/.startActivity
            fi
            ;;
        "summarize")
            # Choose project to sum
            $WD/.chooseProject $WD/.summarize
            ;;
        "stop")
            # Stop running timer, if any
            $WD/.stopActivity
            ;;
        "status")
            # Return status for running timer, if any
            $WD/.timerStatus
            ;;
        "help")
            # Show a help message/ man page
            xmessage -c -file $WD/.man
            ;;
        "switch")
            # switch client for session
            source configure
            ;;
        "quit")
            # Exit the script
            break
            ;;
    esac
done
