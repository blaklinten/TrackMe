#!/bin/bash

#########################################################
# This is a script that helps me keep track of my time. #
#########################################################

# Check if env is ok,
# if not, fix it!
source configure

# Show different chioces 
CHOICE=$(cat $WD/.choices | dmenu -i)
# Real time loop.
case $CHOICE in
    "start")
        # Check if there is running timer and if so
        # inform and exist.
        if [[ -f $ACTIVE ]]; then
            echo "A timer is already running, exiting..." | dmenu 
            exit
        fi

        # Choose project to start
        $WD/.chooseProject $WD/.startActivity
        ;;
    "summarize")
        # Choose project to sum
        $WD/.chooseProject $WD/.summarize
        ;;
    "stop")
        $WD/.stopActivity
        ;;
    "status")
        $WD/.timerStatus
        ;;
    "quit")
        exit
        ;;
    *)
        xmessage -c -file $WD/.man
        ;;
esac
