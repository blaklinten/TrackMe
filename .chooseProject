#!/bin/bash

# Choose what project the script should 
# handle.

# Set script to run when done
export SCRIPT=$1

# Inform user to choose one of the existing projects
# and wait for user input
choice=$(echo -e "Choose an existing project, create a\nnew\nor\nquit\n$(ls $PROJECTS)" | dmenu -i)

case $choice in
    "quit")
        exit
        ;;
    "new")
        $WD/.createProject 
        ;;
    *)
        # Check if given project exist and if not
        # ask for it to be created.
        pushd $PROJECTS > /dev/zero
        for project in *; do
            if [[ $project == $choice ]]; then
                # If project exist, start script in this
                # project
                $SCRIPT $choice
                popd > /dev/zero
                exit
            fi
        done
            echo "Project \"$choice\" does not exist, try again or create it (n)." | dmenu
            $WD/.chooseProject $SCRIPT
        ;;
esac

